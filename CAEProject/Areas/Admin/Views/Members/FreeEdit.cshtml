@using CAEProject.Models
@model CAEProject.Models.MbFreeViewModel

@{
    ViewBag.Title = "Edit";
    Layout = "~/Areas/Admin/Views/Shared/_Layout.cshtml";
    IEnumerable<MbRemarks> mbRemarks = ViewBag.Remark;
}

<h2>修改</h2>
<div class="form-horizontal">
    <h4>會員管理</h4>
    <hr />
</div>
<!--tab nav start-->
<section class="panel">
    <header class="panel-heading tab-bg-primary ">
        <ul class="nav nav-tabs" id="myTab">
            <li class="active">
                <a data-toggle="tab" href="#home">會員資訊</a>
            </li>
            <li class="">
                <a data-toggle="tab" href="#about">管理員備註</a>
            </li>
            <li class="">
                <a data-toggle="tab" href="#profile">使用者備註</a>
            </li>
        </ul>
    </header>
    <div class="panel-body">
        <div class="tab-content">

            <!--需求內容-->
            <div id="home" class="tab-pane active">
                <br />
                @using (Html.BeginForm("FreeEdit", "Members", new { area = "Admin" }))
                {
                    @Html.AntiForgeryToken()
                    <div class="row">
                        <div class="col-lg-12">
                            <section class="panel">
                                <header class="panel-heading">
                                    ▼文字資訊
                                </header>
                                <div class="form-horizontal panel-body text-center">
                                    <br />

                                    @Html.ValidationSummary(true, "", new { @class = "text-danger" })
                                    @Html.HiddenFor(model => model.Id)

                                    <div class="form-group">
                                        @Html.LabelFor(model => model.Account, htmlAttributes: new { @class = "control-label col-md-2" })
                                        <div class="col-md-7">
                                            @Html.EditorFor(model => model.Account, new { htmlAttributes = new { @class = "form-control" } })
                                            @Html.ValidationMessageFor(model => model.Account, "", new { @class = "text-danger" })
                                        </div>
                                    </div>

                                    <div class="form-group">
                                        @Html.LabelFor(model => model.Password, htmlAttributes: new { @class = "control-label col-md-2" })
                                        <div class="col-md-7">
                                            <input type="hidden" name="Password" class="form-control" value="@Model.Password" />
                                            <input type="password" name="passwordAdd" class="form-control" placeholder="如無須更動密碼時空白即可" />
                                            @Html.ValidationMessageFor(model => model.Password, "", new { @class = "text-danger" })
                                        </div>
                                    </div>

                                    <div class="form-group">
                                        @Html.LabelFor(model => model.NoticeDateTime, htmlAttributes: new { @class = "control-label col-md-2" })
                                        <div class="col-md-7 sandbox-container">
                                            @Html.EditorFor(model => model.NoticeDateTime, new { htmlAttributes = new { @class = "form-control", autocomplete = "off" } })
                                            @Html.ValidationMessageFor(model => model.NoticeDateTime, "", new { @class = "text-danger" })
                                        </div>
                                    </div>

                                    <div class="form-group">
                                        @Html.LabelFor(model => model.ContactPerson, htmlAttributes: new { @class = "control-label col-md-2" })
                                        <div class="col-md-7">
                                            @Html.EditorFor(model => model.ContactPerson, new { htmlAttributes = new { @class = "form-control" } })
                                            @Html.ValidationMessageFor(model => model.ContactPerson, "", new { @class = "text-danger" })
                                        </div>
                                    </div>

                                    <div class="form-group">
                                        @Html.LabelFor(model => model.ContactPersonPhone, htmlAttributes: new { @class = "control-label col-md-2" })
                                        <div class="col-md-7">
                                            @Html.EditorFor(model => model.ContactPersonPhone, new { htmlAttributes = new { @class = "form-control" } })
                                            @Html.ValidationMessageFor(model => model.ContactPersonPhone, "", new { @class = "text-danger" })
                                        </div>
                                    </div>

                                    <div class="form-group">
                                        @Html.LabelFor(model => model.Address, htmlAttributes: new { @class = "control-label col-md-2" })
                                        <div class="col-md-7">
                                            @Html.EditorFor(model => model.Address, new { htmlAttributes = new { @class = "form-control" } })
                                            @Html.ValidationMessageFor(model => model.Address, "", new { @class = "text-danger" })
                                        </div>
                                    </div>

                                    <div class="form-group">
                                        @Html.LabelFor(model => model.Extension, htmlAttributes: new { @class = "control-label col-md-2" })
                                        <div class="col-md-7">
                                            @Html.EditorFor(model => model.Extension, new { htmlAttributes = new { @class = "form-control" } })
                                            @Html.ValidationMessageFor(model => model.Extension, "", new { @class = "text-danger" })
                                        </div>
                                    </div>

                                    <div class="form-group">
                                        @Html.LabelFor(model => model.Fax, htmlAttributes: new { @class = "control-label col-md-2" })
                                        <div class="col-md-7">
                                            @Html.EditorFor(model => model.Fax, new { htmlAttributes = new { @class = "form-control" } })
                                            @Html.ValidationMessageFor(model => model.Fax, "", new { @class = "text-danger" })
                                        </div>
                                    </div>

                                    <div class="form-group">
                                        @Html.LabelFor(model => model.CurrentIdentity, htmlAttributes: new { @class = "control-label col-md-2" })
                                        <div class="col-md-7">
                                            @Html.EditorFor(model => model.CurrentIdentity, new { htmlAttributes = new { @class = "form-control" } })
                                            @Html.ValidationMessageFor(model => model.CurrentIdentity, "", new { @class = "text-danger" })
                                        </div>
                                    </div>

                                    <div class="form-group">
                                        @Html.LabelFor(model => model.CurrentUnit, htmlAttributes: new { @class = "control-label col-md-2" })
                                        <div class="col-md-7">
                                            @Html.EditorFor(model => model.CurrentUnit, new { htmlAttributes = new { @class = "form-control" } })
                                            @Html.ValidationMessageFor(model => model.CurrentUnit, "", new { @class = "text-danger" })
                                        </div>
                                    </div>

                                    <div class="form-group">
                                        @Html.LabelFor(model => model.JobTitle, htmlAttributes: new { @class = "control-label col-md-2" })
                                        <div class="col-md-7">
                                            @Html.EditorFor(model => model.JobTitle, new { htmlAttributes = new { @class = "form-control" } })
                                            @Html.ValidationMessageFor(model => model.JobTitle, "", new { @class = "text-danger" })
                                        </div>
                                    </div>

                                    <div class="form-group">
                                        @Html.LabelFor(model => model.MobilePhone, htmlAttributes: new { @class = "control-label col-md-2" })
                                        <div class="col-md-7">
                                            @Html.EditorFor(model => model.MobilePhone, new { htmlAttributes = new { @class = "form-control" } })
                                            @Html.ValidationMessageFor(model => model.MobilePhone, "", new { @class = "text-danger" })
                                        </div>
                                    </div>

                                    <div class="form-group">
                                        @Html.LabelFor(model => model.IdCard, htmlAttributes: new { @class = "control-label col-md-2" })
                                        <div class="col-md-7">
                                            @Html.EditorFor(model => model.IdCard, new { htmlAttributes = new { @class = "form-control" } })
                                            @Html.ValidationMessageFor(model => model.IdCard, "", new { @class = "text-danger" })
                                        </div>
                                    </div>

                                    <div class="form-group">
                                        @Html.LabelFor(model => model.Email, htmlAttributes: new { @class = "control-label col-md-2" })
                                        <div class="col-md-7">
                                            @Html.EditorFor(model => model.Email, new { htmlAttributes = new { @class = "form-control" } })
                                            @Html.ValidationMessageFor(model => model.Email, "", new { @class = "text-danger" })
                                        </div>
                                    </div>

                                    <div class="form-group">
                                        @Html.LabelFor(model => model.Phone, htmlAttributes: new { @class = "control-label col-md-2" })
                                        <div class="col-md-7">
                                            @Html.EditorFor(model => model.Phone, new { htmlAttributes = new { @class = "form-control" } })
                                            @Html.ValidationMessageFor(model => model.Phone, "", new { @class = "text-danger" })
                                        </div>
                                    </div>

                                    <div class="form-group">
                                        @Html.LabelFor(model => model.BusinessItem, htmlAttributes: new { @class = "control-label col-md-2" })
                                        <div class="col-md-7">
                                            @Html.EditorFor(model => model.BusinessItem, new { htmlAttributes = new { @class = "form-control" } })
                                            @Html.ValidationMessageFor(model => model.BusinessItem, "", new { @class = "text-danger" })
                                        </div>
                                    </div>

                                    <div class="form-group">
                                        @Html.LabelFor(model => model.Demand, htmlAttributes: new { @class = "control-label col-md-2" })
                                        <div class="col-md-7">
                                            @Html.EnumDropDownListFor(model => model.Demand, htmlAttributes: new { @class = "form-control" })
                                            @Html.ValidationMessageFor(model => model.Demand, "", new { @class = "text-danger" })
                                        </div>
                                    </div>

                                    <div class="form-group">
                                        @Html.LabelFor(model => model.Subscription, htmlAttributes: new { @class = "control-label col-md-2" })
                                        <div class="col-md-7">
                                            @Html.EnumDropDownListFor(model => model.Subscription, htmlAttributes: new { @class = "form-control" })
                                            @Html.ValidationMessageFor(model => model.Subscription, "", new { @class = "text-danger" })
                                        </div>
                                    </div>

                                </div>
                            </section>
                        </div>

                        <div class="col-lg-12">
                            <section class="panel">
                                <header class="panel-heading">
                                    ▼狀態
                                </header>
                                <div class="form-horizontal panel-body text-center">
                                    <br />
                                    <div class="form-group">
                                        @Html.LabelFor(model => model.ApplicationStatus, htmlAttributes: new { @class = "control-label col-md-2" })
                                        <div class="col-md-6">
                                            @Html.EnumDropDownListFor(model => model.ApplicationStatus, htmlAttributes: new { @class = "form-control" })
                                            @Html.ValidationMessageFor(model => model.ApplicationStatus, "", new { @class = "text-danger" })
                                        </div>
                                    </div>
                                    <div class="form-group">
                                        @Html.LabelFor(model => model.ApproveDateTime, htmlAttributes: new { @class = "control-label col-md-2" })
                                        <div class="col-md-2">
                                            <label>@Model.ApproveDateTime</label>
                                            <input type="hidden" name="ApproveDateTime" value="@Model.ApproveDateTime" />
                                        </div>
                                    </div>
                                    <div class="form-group">
                                        @Html.LabelFor(model => model.DisenableDateTime, htmlAttributes: new { @class = "control-label col-md-2" })
                                        <div class="col-md-2">
                                            <label>@Model.DisenableDateTime</label>
                                            <input type="hidden" name="DisenableDateTime" value="@Model.DisenableDateTime" />
                                        </div>
                                    </div>
                                    <br />
                                </div>
                            </section>
                        </div>
                        <div class="form-group">
                            <div class="col-md-offset-2 col-md-6">
                                <button type="submit" class="btn btn-info"><span class="icon_cloud-upload_alt"></span> 送出</button>
                                <a href="@Url.Action("Index", "members", new {area = "admin"})" style="margin: 0 0 0 5px" class="btn btn-danger"><span class="icon_house_alt"></span> 返回</a>
                            </div>
                        </div>
                    </div>
                }
            </div>
            <!--回覆紀錄-->
            <div id="about" class="tab-pane">
                @using (Html.BeginForm("FreeRemarkCreate", "MbRemarks", new { area = "Admin"}))
                {
                    @Html.AntiForgeryToken()
                    <br />
                    <div class="row">
                        <div class="col-lg-12">
                            <section class="panel">
                                <header class="panel-heading">
                                    備註資訊
                                </header>
                                <div class="form-horizontal panel-body text-center">
                                    <br />
                                    @Html.ValidationSummary(true, "", new { @class = "text-danger" })

                                    <div class="form-group">
                                        <label class="control-label col-md-2">管理者備註</label>
                                        <div class="col-md-7">
                                            <textarea name="Remark" class="form-control" rows="10" cols="50" placeHolder="請輸入備註"></textarea>
                                        </div>
                                    </div>
                                    
                                    <input type="hidden" name="MbRemarksId" value="@Model.Id"/>
                                    <br />
                                </div>
                            </section>
                            <div class="form-group">
                                <div class="col-md-offset-2 col-md-7">
                                    <button type="submit" class="btn btn-info"><span class="icon_cloud-upload_alt"></span> 送出</button>
                                    <a href="@Url.Action("Index", "Members", new {area = "admin"})" style="margin: 0 0 0 5px" class="btn btn-danger"><span class="icon_house_alt"></span> 返回</a>
                                </div>
                            </div>

                        </div>
                    </div>
                }
            </div>

            <!--需求回覆-->
            <div id="profile" class="tab-pane">
                <br />
                <table class="table table-striped table-advance table-hover">
                    <tr>
                        <th>
                            編號
                        </th>
                        <th>
                            備註
                        </th>
                        <th>
                            建立人
                        </th>
                        <th>
                            建立日期
                        </th>
                        <th></th>
                    </tr>
                    @if (mbRemarks != null)
                    {
                        foreach (var item in mbRemarks)
                        {
                            <tr>
                                <td>
                                    @Html.DisplayFor(modelItem => item.Id)
                                </td>
                                <td>
                                    @Html.DisplayFor(modelItem => item.Remark)
                                </td>
                                <td>
                                    @Html.DisplayFor(modelItem => item.AddUser)
                                </td>
                                <td>
                                    @Html.DisplayFor(modelItem => item.DateTime)
                                </td>
                                <td>
                                    @Html.ActionLink("刪除", "PaidDelete", "MbRemarks", new { area = "Admin", id = item.Id }, new { @class = "btn btn-danger" })
                                </td>
                            </tr>
                        }
                    }
                </table>
            </div>
        </div>
    </div>
</section>
